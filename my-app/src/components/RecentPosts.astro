---
import { getCollection } from 'astro:content';
import PostCard from './PostCard.astro';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);
---

<section>
  <h2 class="text-2xl font-bold mb-6 tracking-tight">Recent Posts</h2>
  <ul class="space-y-5 list-none pl-0">
    {posts.map((post) => (
      <li>
        <PostCard
          title={post.data.title}
          date={post.data.date}
          excerpt={post.data.excerpt}
          slug={post.slug}
          tags={post.data.tags}
          body={post.body ?? ''}
          headingLevel="h3"
        />
      </li>
    ))}
  </ul>
</section>
